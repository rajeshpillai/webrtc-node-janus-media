<!-- public/index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Janus Video Call</title>
    <script src="http://webrtc.github.io/adapter/adapter-latest.js"></script>
</head>
<body>
    <h2>Janus Video Call</h2>
    <!-- Include Janus JavaScript Library -->
    <script src="janus.js"></script>
    <script>    
    var server = null;
    if(window.location.protocol === 'http:') {
        server = "http://" + window.location.hostname + ":8088/janus";
    }
    else {
        server = "https://" + window.location.hostname + ":8089/janus";
    }

   console.log(`SERVER: ${server}`);

    var janus = null;

    Janus.init({
        debug: "all", 
        callback: function() {
            // Make sure the browser supports WebRTC
            if(!Janus.isWebrtcSupported()) {
                alert("No WebRTC support... ");
                return;
            }
            // Create session
            janus = new Janus(
                {
                    server: server,
                    success: function() {
                        // Session created successfully
                        // Now attach to a plugin, e.g., VideoRoom
                    },
                    error: function(error) {
                        Janus.error(error);
                        alert(error, function() {
                            window.location.reload();
                        });
                    },
                    destroyed: function() {
                        window.location.reload();
                    }
                });
        }
    });
    </script>

</html>

